<!-- Copyright (C) Tanya Hastur. All rights reserved. -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Desktop ENA</title>
        <link rel="stylesheet" href="css/desktop.ena.main.css">
        <link rel="stylesheet" href="css/color.picker.css">
        <link rel="stylesheet" href="css/dropdown.css">
    </head>
    <body aria-label class="windows">
        <div class="desktop-ena" style="inset: 0px; position: relative; height: 600px;">
            <div class="desktop-grid-view">
                <div class="desktop-grid-branch-node">        
                    <div class="desktop-split-view2 vertical">
                        <div class="desktop-scrollable-element" role="presentation" style="position: relative; overflow: hidden;">
                            <div class="split-view-container" style="overflow: hidden;">
                                <div class="split-view-view" style="top: 0px; height: 35px; z-index: 99">
                                    <div class="part titlebar">
                                        <div class="titlebar-container">
                                            <div class="titlebar-drag-region"></div>
                                            <div class="titlebar-left">
                                                <a class="window-appicon" style="app-region: drag;"></a>
                                                <div class="window-apptitle"><div class="window-apptitle-text"><div class="window-apptitle-title" style="app-region: drag;">Desktop ENA</div></div></div>
                                            </div>
                                            <div class="titlebar-right">
                                                <div class="window-controls-container primary"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="split-view-view window-container" style="top: 35px; height: calc(100% - 35px);">
                                    <div class="desktop-grid-branch-node">
                                        <div class="desktop-split-view2 horizontal">
                                            <div class="desktop-scrollable-element">
                                                <div class="split-view-container">
                                                    <div class="split-view-view visible" style="left: 0px; width: 100%;">
                                                        <div class="desktop-container">
                                                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 40 40" display="none" width="0" height="0">
                                                                <symbol id="ko-fi" viewBox="0 0 40 40"><path d="M17.7,8.7c4.3,0,8.6,0,12.9,0c4.2,0,8,3.1,8.7,7.3c0.7,4.4-1.4,8.3-5.6,9.8c-1.2,0.4-2.5,0.5-3.8,0.7 c-0.5,0.1-0.8,0.2-0.8,0.8c0,0.6-0.2,1.3-0.4,1.9c-0.7,2-2.4,3.1-4.5,3.1c-5.7,0-11.3,0-17,0c-2.9,0-4.8-1.9-4.8-4.7 c0-5.6,0-11.2,0-16.7c0-1.6,0.4-2.1,2-2.1C8.9,8.7,13.3,8.7,17.7,8.7z M23.1,18.2c0-2.2-1.4-3.6-3.5-3.7c-1.3,0-2.4,0.5-3.3,1.3 c-0.4,0.4-0.7,0.3-1.2,0c-0.7-0.5-1.5-0.9-2.3-1.2c-1.8-0.5-4.2,0.4-4.5,2.7c-0.2,1.7,0.4,3.2,1.6,4.3c1.7,1.7,3.6,3.4,5.4,5.1 c0.3,0.3,0.6,0.3,0.9,0c1.7-1.7,3.5-3.4,5.2-5.1C22.5,20.7,23.2,19.6,23.1,18.2z M29.1,17.7c0,0.9,0,1.8,0,2.7 c0,1.6-0.3,1.5,1.5,1.5c1.6,0,2.9-0.7,3.6-2.2c0.7-1.6,0.8-3.2-0.3-4.7c-1-1.4-2.4-1.6-4-1.5c-0.6,0-0.8,0.2-0.8,0.8 C29.1,15.4,29.1,16.5,29.1,17.7z"></path></symbol>
                                                                <symbol id="pause" viewBox="0 0 320 512"><path fill="currentColor" d="M272 63.1l-32 0c-26.51 0-48 21.49-48 47.1v288c0 26.51 21.49 48 48 48L272 448c26.51 0 48-21.49 48-48v-288C320 85.49 298.5 63.1 272 63.1zM80 63.1l-32 0c-26.51 0-48 21.49-48 48v288C0 426.5 21.49 448 48 448l32 0c26.51 0 48-21.49 48-48v-288C128 85.49 106.5 63.1 80 63.1z"></path></symbol>
                                                                <symbol id="play" viewBox="0 0 384 512"><path fill="currentColor" d="M361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215z"></path><path fill="currentColor" d="M361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215z"></path></symbol>
                                                                <symbol id="rotate-left" viewBox="0 0 512 512"><path fill="currentColor" d="M48.5 224H40c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H48.5z"></path></symbol>
                                                                <symbol id="flip-preview" viewBox="0 0 512 512"><path fill="currentColor" d="M32 96l320 0V32c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l96 96c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-96 96c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6V160L32 160c-17.7 0-32-14.3-32-32s14.3-32 32-32zM480 352c17.7 0 32 14.3 32 32s-14.3 32-32 32H160v64c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-96-96c-6-6-9.4-14.1-9.4-22.6s3.4-16.6 9.4-22.6l96-96c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 64H480z"></path></symbol>
                                                            </svg>
                                                            <div class="row">
                                                                <div class="col-6">
                                                                    <div class="overflow-pony">
                                                                        <a href="https://www.ko-fi.com/tanyahastur" target="_blank" class="tanya-button tanya-kofi-button custom-link">
                                                                            <svg class="tanya-kofi-logo"><use xlink:href="#ko-fi"></use></svg>
                                                                            <div class="tempest-pony" style="left: -64px"><canvas-pony><pony-preview style="width:180px;height:180px;position:relative;top:-20px;"></pony-preview></canvas-pony></div>
                                                                            Buy me a Coffee
                                                                            <div class="canvas-pony"><canvas-pony><pony-preview style="width:180px;height:180px;position:relative;top:-20px;"></pony-preview></canvas-pony></div>
                                                                        </a>
                                                                    </div>
                                                                    <character-select class="input-group-append">
                                                                        <div class="character-select">
                                                                            <select id="characters" class="btn btn-dark" style="width: 400px; margin: 0 auto 0 auto">
                                                                                <option value="-1" disabled="disabled" selected>Select a Character</option>
                                                                            </select>
                                                                            <label class="dropdown-toggle"></label>
                                                                            <button aria-label="Delete pony" class="btn btn-danger remove-button">
                                                                                <fa-icon class="ng-fa-icon">
                                                                                    <svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" class="svg-inline--fa fa-trash fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                                                        <path fill="currentColor" d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"></path>
                                                                                    </svg>
                                                                                </fa-icon>
                                                                            </button>
                                                                        </div>
                                                                    </character-select>
                                                                    <div class="character-preview-box mx-auto mt-3">
                                                                        <character-preview style="z-index: 100;"></character-preview>
                                                                    </div>
                                                                    <div class="form-group character-preview-controls-box">
                                                                        <character-option-buttons style="width: 100%;">
                                                                            <div class="character-preview-controls btn-group below-character">
                                                                                <div class="d-flex dropdown h-100 dropup">
                                                                                    <button class="btn dropdown-toggles below-character btn-character">x4</button>
                                                                                    <div class="dropdown-menu dropdown-narrow" id="dropdown-menu-1">
                                                                                        <a class="dropdown-item dropdown-item-radio">1x</a>
                                                                                        <a class="dropdown-item dropdown-item-radio">2x</a>
                                                                                        <a class="dropdown-item dropdown-item-radio">3x</a>
                                                                                        <a class="dropdown-item dropdown-item-radio">4x</a>
                                                                                        <a class="dropdown-item dropdown-item-radio">5x</a>
                                                                                        <a class="dropdown-item dropdown-item-radio">6x</a>
                                                                                    </div>
                                                                                </div>
                                                                                <button title="Flip preview" class="btn border-fix btn-character">
                                                                                    <fa-icon class="ng-fa-icon">
                                                                                        <svg class="svg-inline--fa" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                                            <use xlink:href="#flip-preview"></use>
                                                                                        </svg>
                                                                                    </fa-icon>
                                                                                </button>
                                                                            </div>
                                                                        </character-option-buttons>
                                                                    </div>
                                                                    <div class="form-group text-center">
                                                                        <button id="duplicate-btn" class="btn btn-lg btn-default" disabled>Duplicate</button>
                                                                        <button aria-label="Save character" id="save-btn" class="btn btn-lg btn-default" disabled>Save</button>
                                                                    </div>
                                                                    <h5>Notice</h5>
                                                                    <p class="text-muted">This app is a <strong>work in progress</strong>. There might be bugs and occasional downtimes.</p>
                                                                </div>
                                                                <div class="col-6">
                                                                    <div class="character-tab character-tab-none">
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Skins</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="input-group-append">
                                                                                    <div>
                                                                                        <select id="skins" class="btn btn-dark" style="width: 100%;">
                                                                                            <option value="default" selected>Default</option>
                                                                                        </select>
                                                                                        <label class="dropdown-toggle"></label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Color 1</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="color-picker dropdown">
                                                                                    <div class="color-picker-box" style="cursor: grab;">
                                                                                        <div class="color-picker-box-top primary-color" style="--color:null;">
                                                                                            <div class="color-picker-box-mask medium-indicator"></div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <input type="text" spellcheck="false" value="" class="form-control color-picker-input primary-color-value" aria-label="Base color fill" maxlength="7">
                                                                                    <a aria-label="Pick color" class="color-picker-chevron" style="cursor: pointer;">
                                                                                        <fa-icon class="ng-fa-icon">
                                                                                            <svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" class="svg-inline--fa fa-chevron-down fa-w-14 fa-fw" xmlns="http://www.w3.org/2000/svg">
                                                                                                <use xlink:href="#chevron-down"></use>
                                                                                            </svg>
                                                                                        </fa-icon>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Color 2</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="color-picker dropdown-2">
                                                                                    <div class="color-picker-box" style="cursor: grab;">
                                                                                        <div class="color-picker-box-top secondary-color" style="--color:null;">
                                                                                            <div class="color-picker-box-mask medium-indicator"></div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <input type="text" spellcheck="false" value="" class="form-control color-picker-input secondary-color-value" aria-label="Base color fill" maxlength="7">
                                                                                    <a aria-label="Pick color" class="color-picker-chevron" style="cursor: pointer;">
                                                                                        <fa-icon class="ng-fa-icon">
                                                                                            <svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" class="svg-inline--fa fa-chevron-down fa-w-14 fa-fw" xmlns="http://www.w3.org/2000/svg">
                                                                                                <use xlink:href="#chevron-down"></use>
                                                                                            </svg>
                                                                                        </fa-icon>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <div class="col-sm-4 col-lock-box">
                                                                                <label for="frame-input">Animation</label>
                                                                                <button id="toggle-animation" class="check-box lock-box">
                                                                                    <fa-icon>
                                                                                        <svg aria-hidden="true" class="svg-inline--fa fa-w-10 fa-fw" xmlns="http://www.w3.org/2000/svg">
                                                                                            <use xlink:href="#pause"></use>
                                                                                        </svg>
                                                                                    </fa-icon>
                                                                                </button>
                                                                            </div>
                                                                            <div class="col-sm-8">
                                                                                <div class="input-group">
                                                                                    <input type="number" id="current-frame" class="form-control" value="0" autocomplete="off" disabled="">
                                                                                    <div class="input-group-append">
                                                                                        <select id="animations" class="btn btn-dark">
                                                                                            <option value="idle" selected>Stand</option>
                                                                                            <option value="walk">Walk</option>
                                                                                            <option value="sit">Sit</option>
                                                                                            <option value="dangle">Dangle</option>
                                                                                            <option value="drag">Drag</option>
                                                                                            <option value="init-fall">Fall</option>
                                                                                        </select>
                                                                                        <label class="dropdown-toggle"></label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <hr/>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Advanced option</label>
                                                                            <div class="col-sm-8 text-muted pt-1">
                                                                                <custom-checkbox>
                                                                                    <div class="form-check mb-2">
                                                                                        <label>
                                                                                            <input type="checkbox" id="allow-custom-shadows" class="form-check-input ng-valid ng-dirty ng-touched">
                                                                                            <div class="form-check-label unselectable">allow custom shadows</div>
                                                                                        </label>
                                                                                    </div>
                                                                                </custom-checkbox>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Background</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="color-picker dropdown-3">
                                                                                    <div class="color-picker-box" style="cursor: grab;">
                                                                                        <div class="color-picker-box-top background-color" style="--color:null;">
                                                                                            <div class="color-picker-box-mask medium-indicator"></div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <input type="text" spellcheck="false" value="" class="form-control color-picker-input background-color-value" aria-label="Base color fill" maxlength="7">
                                                                                    <a aria-label="Pick color" class="color-picker-chevron" style="cursor: pointer;">
                                                                                        <fa-icon class="ng-fa-icon">
                                                                                            <svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" class="svg-inline--fa fa-chevron-down fa-w-14 fa-fw" xmlns="http://www.w3.org/2000/svg">
                                                                                                <use xlink:href="#chevron-down"></use>
                                                                                            </svg>
                                                                                        </fa-icon>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group" id="shadow-intensity">
                                                                            <label class="col-sm-4 col-form-label">Shadow intensity</label>
                                                                            <div class="col-sm-8 pt-1">
                                                                                <div class="d-flex flex-nowrap">
                                                                                    <slider-bar>
                                                                                        <input class="flex-grow-1" type="range" min="0" max="100" value="50" oninput="rangenumber.value=value" id="range">
                                                                                    </slider-bar>
                                                                                    <input type="number" pattern="[0-9]*" value="50" maxlength="3" class="form-control form-control-sm ms-1 ng-pristine ng-valid ng-touched" oninput="range.value=value" id="rangenumber" step="1" min="0" max="100">
                                                                                    <button title="Reset value" id="reset-value" class="btn btn-sm btn-outline-reset ms-1">
                                                                                        <fa-icon class="ng-fa-icon">
                                                                                            <svg role="img" class="svg-inline--fa fa-rotate-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                                                <use xlink:href="#rotate-left"></use>
                                                                                            </svg>
                                                                                        </fa-icon>
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <hr/>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Accessory</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="input-group-append">
                                                                                    <div>
                                                                                        <select id="accessory" class="btn btn-dark" style="width: 100%;">
                                                                                            <option value="none" selected>None</option>
                                                                                            <option value="ena">Ena Plushie</option>
                                                                                            <option value="ena_bunny">Ena Bunny Plushie</option>
                                                                                            <option value="bbq_ena">BBQ Ena Plushie</option>
                                                                                            <option value="shepherd">Shepherd Plushie</option>
                                                                                            <option value="margo">Margo Plushie</option>
                                                                                            <option value="ula">Ula Plushie</option>
                                                                                            <option value="hg_dog">Hourglass Dog Plushie</option>
                                                                                            <option value="clown_dog">Clown Dog Plushie</option>
                                                                                            <option value="turron">Turrón</option>
                                                                                            <option value="pumpkin">Pumpkin Basket</option>
                                                                                            <option value="dog_grim">DogGrim Plushie</option>
                                                                                            <option value="margo_kitty">Margo Kitty Plushie</option>
                                                                                            <option value="lollipop">Lollipop</option>
                                                                                            <option value="eve_hat">Eve Hat</option>
                                                                                            <option value="bbq_bunny">BBQ Ena Bunny Plushie</option>
                                                                                            <option value="phone">Phone Accessory</option>
                                                                                            <option value="leek">Leek Accessory</option>
                                                                                            <option value="baguette">Baguette Accessory</option>
                                                                                            <option value="pearto">Kasane Pearto</option>
                                                                                        </select>
                                                                                        <label class="dropdown-toggle"></label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Color 1</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="color-picker dropdown-4">
                                                                                    <div class="color-picker-box" style="cursor: grab;">
                                                                                        <div class="color-picker-box-top tertiary-color" style="--color:null;">
                                                                                            <div class="color-picker-box-mask medium-indicator"></div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <input type="text" spellcheck="false" value="" class="form-control color-picker-input tertiary-color-value" aria-label="Base color fill" maxlength="7">
                                                                                    <a aria-label="Pick color" class="color-picker-chevron" style="cursor: pointer;">
                                                                                        <fa-icon class="ng-fa-icon">
                                                                                            <svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" class="svg-inline--fa fa-chevron-down fa-w-14 fa-fw" xmlns="http://www.w3.org/2000/svg">
                                                                                                <use xlink:href="#chevron-down"></use>
                                                                                            </svg>
                                                                                        </fa-icon>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <label class="col-sm-4 col-form-label">Color 2</label>
                                                                            <div class="col-sm-8">
                                                                                <div class="color-picker dropdown-5">
                                                                                    <div class="color-picker-box" style="cursor: grab;">
                                                                                        <div class="color-picker-box-top quaternary-color" style="--color:null;">
                                                                                            <div class="color-picker-box-mask medium-indicator"></div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <input type="text" spellcheck="false" value="" class="form-control color-picker-input quaternary-color-value" aria-label="Base color fill" maxlength="7">
                                                                                    <a aria-label="Pick color" class="color-picker-chevron" style="cursor: pointer;">
                                                                                        <fa-icon class="ng-fa-icon">
                                                                                            <svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" class="svg-inline--fa fa-chevron-down fa-w-14 fa-fw" xmlns="http://www.w3.org/2000/svg">
                                                                                                <use xlink:href="#chevron-down"></use>
                                                                                            </svg>
                                                                                        </fa-icon>
                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="text-center text-muted">
                                                                <div class="tinyface"></div>
                                                            </div>
                                                            <footer class="text-muted text-nowrap">
                                                                <div class="app-version">version <b class="me-2">v1.0.0 <strong>(Community Continued)</strong></b></div>
                                                                <div class="text-end">
                                                                    <div class="d-flex flex-wrap">
                                                                        <div class="text-nowrap">Copyright © <a target="_blank" class="me-1 custom-link" href="https://twitter.com/TanyaHastur">HasturDev</a> |&nbsp;</div>
                                                                        <a target="_blank" class="me-1 custom-link" href="https://discord.gg/BnnZCAtXNj">Desktop ENA</a>
                                                                    </div>
                                                                </div>
                                                            </footer>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="js/color-picker.js"></script>
        <script src="js/dropdown.js"></script>
        <script src="image-utils.js"></script>
        <script src="js/fontUtils.js"></script>
        <script src="js/ponyUtils.js"></script>
        <script src="animate-utils.js"></script>
        <script src="js/renderer.js"></script>
        <script src="js/fixToTop.js"></script>
        <script>
            const allowCustomShadows = document.querySelector('#allow-custom-shadows');
            const shadowIntensity = document.querySelector('#shadow-intensity');
            allowCustomShadows.checked = ipcRenderer.sendSync('get-allow-customs');
            shadowIntensity.style.display = allowCustomShadows.checked ? 'flex' : 'none';
            allowCustomShadows.addEventListener('click', function(e) {
                const checked = e.target.checked;
                if (checked) {
                    document.querySelector('#shadow-intensity').style.display = "flex";
                    ipcRenderer.send('update-allow-customs', true);
                } else {
                    document.querySelector('#shadow-intensity').style.display = "none";
                    ipcRenderer.send('update-allow-customs', false);
                    numberInput.value = 50;
                    rangeInput.value = 50;
                    rangeInput.style.backgroundSize = (50 - 0) * 100 / (100 - 0) + '% 100%';
                    ipcRenderer.send('update-darkness', 50);
                    if (characterPreview != null) {
                        characterPreview.setDarkness(50);
                        recolorUpdate();
                    }
                }
            });
            // recolor-update
            function recolorUpdate() {
                if (characterPreview != null) {
                    characterPreview.setRecolor([document.querySelector('.primary-color-value').value, document.querySelector('.secondary-color-value').value]);
                    characterPreview.setRecolor2([document.querySelector('.tertiary-color-value').value, document.querySelector('.quaternary-color-value').value]);
                    let accessory = characterPreview.findCharacter(characterPreview.name).accessory;
                    if (accessory != 'none') { characterPreview.setAccessory(accessory); }
                }
            }
            document.querySelector('.primary-color-value').addEventListener('input', recolorUpdate);
            document.querySelector('.secondary-color-value').addEventListener('input', recolorUpdate);
            document.querySelector('.tertiary-color-value').addEventListener('input', recolorUpdate);
            document.querySelector('.quaternary-color-value').addEventListener('input', recolorUpdate);
            // fix-to-top.js
            const characterPreviewBox = document.querySelector('.character-preview-box');
            const windowContainer = document.querySelector('.split-view-view.window-container');
            const characterPreviewElement = document.querySelector('character-preview');

            let fixToTopController = new FixToTop(characterPreviewBox);
            let isFixed = false;

            fixToTopController.fixToTop.on('change', (shouldFix) => {
                if (shouldFix) {
                    if (characterPreview != undefined) { characterPreview.setFixed(true); }
                    fixToTopController.element.classList.add('fixed-to-top');
                } else {
                    if (characterPreview != undefined) { characterPreview.setFixed(false); }
                    fixToTopController.element.classList.remove('fixed-to-top');
                }
                isFixed = shouldFix;
            });

            windowContainer.addEventListener('scroll', function() {
                fixToTopController.scroll();
                if (isFixed) {
                    characterPreviewElement.style.top = (this.scrollTop - 45) + 'px'; // 35 + 10 = 45
                }
            });
            // slider-bar.js
            const rangeInput = document.querySelector('input[type="range"]');
            const numberInput = document.querySelector('input[type="number"]#rangenumber');
            const resetValue = document.querySelector('#reset-value');
            // get-darkness
            rangeInput.value = ipcRenderer.sendSync('get-darkness');
            rangeInput.style.backgroundSize = ipcRenderer.sendSync('get-darkness') + '% 100%';
            numberInput.value = ipcRenderer.sendSync('get-darkness');
            function handleInputChange(e) {
                let target = e.target;
                if (e.target.type !== 'range') { target = document.getElementById('range'); }
                const min = target.min, max = target.max, val = target.value;
                target.style.backgroundSize = (val - min) * 100 / (max - min) + '% 100%';
                ipcRenderer.send('update-darkness', val);
                if (characterPreview != null) {
                    characterPreview.setDarkness(val);
                    recolorUpdate();
                }
            }
            rangeInput.addEventListener('input', handleInputChange);
            numberInput.addEventListener('input', handleInputChange);
            resetValue.addEventListener('click', function(e) {
                numberInput.value = 50;
                rangeInput.value = 50;
                rangeInput.style.backgroundSize = (50 - 0) * 100 / (100 - 0) + '% 100%';
                ipcRenderer.send('update-darkness', 50);
                if (characterPreview != null) {
                    characterPreview.setDarkness(50);
                    recolorUpdate();
                }
            });
            // color-picker.js
            const picker = new CP(document.querySelector('.color-picker .form-control.color-picker-input'));
            const picker_2 = new CP(document.querySelector('.color-picker.dropdown-2 .form-control.color-picker-input'));
            const picker_3 = new CP(document.querySelector('.color-picker.dropdown-3 .form-control.color-picker-input'));
            const picker_4 = new CP(document.querySelector('.color-picker.dropdown-4 .form-control.color-picker-input'));
            const picker_5 = new CP(document.querySelector('.color-picker.dropdown-5 .form-control.color-picker-input'));
            function disableAlphaControl(picker, color) {
                if (picker.noAlpha) { return; }
                picker.noAlpha = true;
                picker.self.classList.add(picker.state.class + '__dialog--no-alpha');
                picker.on('change', function (r, g, b) {
                    this.source.value = CP.HEX([r, g, b, 1]);
                    document.querySelector(color + '-value').addEventListener('change', function() {
                        document.querySelector(color).style.setProperty('--color', document.querySelector(color + '-value').value);
                        if (color === '.background-color') {
                            document.querySelector('.character-preview-box').style.backgroundColor = document.querySelector(color + '-value').value;
                        }
                    })
                    document.querySelector(color).style.setProperty('--color', CP.HEX([r, g, b, 1]));
                    if (document.querySelector('#characters').value != -1 && (color === '.primary-color' || color === '.secondary-color' || color === '.tertiary-color' || color === '.quaternary-color')) {
                        recolorUpdate();
                    }
                    if (color === '.background-color') {
                        document.querySelector('.character-preview-box').style.backgroundColor = CP.HEX([r, g, b, 1]);
                    }
                });
            }
            disableAlphaControl(picker, '.primary-color');
            disableAlphaControl(picker_2 , '.secondary-color');
            disableAlphaControl(picker_3 , '.background-color');
            disableAlphaControl(picker_4 , '.tertiary-color');
            disableAlphaControl(picker_5 , '.quaternary-color');
        </script>
    </body>
</html>